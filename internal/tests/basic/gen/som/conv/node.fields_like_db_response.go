// Code generated by github.com/go-surreal/som, DO NOT EDIT.
package conv

import (
	v2 "github.com/fxamacker/cbor/v2"
	som "github.com/go-surreal/som/tests/basic/gen/som"
	model "github.com/go-surreal/som/tests/basic/model"
)

type FieldsLikeDBResponse struct {
	model.FieldsLikeDBResponse
}

func (c *FieldsLikeDBResponse) MarshalCBOR() ([]byte, error) {
	if c == nil {
		return v2.Marshal(nil)
	}
	data := make(map[string]interface{})

	// Embedded som.Node/Edge ID field
	if c.ID() != nil {
		data["id"] = c.ID()
	}

	// Regular fields
	{
		data["time"] = c.Time
	}
	{
		data["status"] = c.Status
	}
	{
		data["detail"] = c.Detail
	}
	if c.Result != nil {
		data["result"] = c.Result
	}

	return v2.Marshal(data)
}

func (c *FieldsLikeDBResponse) UnmarshalCBOR(data []byte) error {
	var rawMap map[string]v2.RawMessage
	if err := v2.Unmarshal(data, &rawMap); err != nil {
		return err
	}

	// Embedded som.Node/Edge ID field
	if raw, ok := rawMap["id"]; ok {
		var id *som.ID
		v2.Unmarshal(raw, &id)
		c.Node = som.NewNode(id)
	}

	// Regular fields
	if raw, ok := rawMap["time"]; ok {
		v2.Unmarshal(raw, &c.Time)
	}
	if raw, ok := rawMap["status"]; ok {
		v2.Unmarshal(raw, &c.Status)
	}
	if raw, ok := rawMap["detail"]; ok {
		v2.Unmarshal(raw, &c.Detail)
	}
	if raw, ok := rawMap["result"]; ok {
		v2.Unmarshal(raw, &c.Result)
	}

	return nil
}

func FromFieldsLikeDBResponse(data model.FieldsLikeDBResponse) FieldsLikeDBResponse {
	return FieldsLikeDBResponse{FieldsLikeDBResponse: data}
}
func FromFieldsLikeDBResponsePtr(data *model.FieldsLikeDBResponse) *FieldsLikeDBResponse {
	if data == nil {
		return nil
	}
	return &FieldsLikeDBResponse{FieldsLikeDBResponse: *data}
}

func ToFieldsLikeDBResponse(data FieldsLikeDBResponse) model.FieldsLikeDBResponse {
	return data.FieldsLikeDBResponse
}
func ToFieldsLikeDBResponsePtr(data *FieldsLikeDBResponse) *model.FieldsLikeDBResponse {
	if data == nil {
		return nil
	}
	result := data.FieldsLikeDBResponse
	return &result
}

type fieldsLikeDbresponseLink struct {
	FieldsLikeDBResponse
	ID *som.ID
}

func (f *fieldsLikeDbresponseLink) MarshalCBOR() ([]byte, error) {
	if f == nil {
		return nil, nil
	}
	return v2.Marshal(f.ID)
}

func (f *fieldsLikeDbresponseLink) UnmarshalCBOR(data []byte) error {
	if err := v2.Unmarshal(data, &f.ID); err == nil {
		return nil
	}
	type alias fieldsLikeDbresponseLink
	var link alias
	err := v2.Unmarshal(data, &link)
	if err == nil {
		*f = fieldsLikeDbresponseLink(link)
	}
	return err
}

func fromFieldsLikeDBResponseLink(link *fieldsLikeDbresponseLink) model.FieldsLikeDBResponse {
	if link == nil {
		return model.FieldsLikeDBResponse{}
	}
	res := FieldsLikeDBResponse(link.FieldsLikeDBResponse)
	return ToFieldsLikeDBResponse(res)
}

func fromFieldsLikeDBResponseLinkPtr(link *fieldsLikeDbresponseLink) *model.FieldsLikeDBResponse {
	if link == nil {
		return nil
	}
	res := FieldsLikeDBResponse(link.FieldsLikeDBResponse)
	out := ToFieldsLikeDBResponse(res)
	return &out
}

func toFieldsLikeDBResponseLink(node model.FieldsLikeDBResponse) *fieldsLikeDbresponseLink {
	if node.ID() == nil {
		return nil
	}
	link := fieldsLikeDbresponseLink{FieldsLikeDBResponse: FromFieldsLikeDBResponse(node), ID: node.ID()}
	return &link
}

func toFieldsLikeDBResponseLinkPtr(node *model.FieldsLikeDBResponse) *fieldsLikeDbresponseLink {
	if node == nil || node.ID() == nil {
		return nil
	}
	link := fieldsLikeDbresponseLink{FieldsLikeDBResponse: FromFieldsLikeDBResponse(*node), ID: node.ID()}
	return &link
}
