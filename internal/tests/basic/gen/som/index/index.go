// Code generated by github.com/go-surreal/som, DO NOT EDIT.

package index

import (
	"context"
	"fmt"
)

type Database interface {
	Query(ctx context.Context, statement string, vars map[string]any) ([]byte, error)
}

type rebuildable struct {
	db    Database
	table string
	name  string
}

func (r *rebuildable) Rebuild(ctx context.Context) error {
	query := fmt.Sprintf("REBUILD INDEX %s ON TABLE %s", r.name, r.table)

	_, err := r.db.Query(ctx, query, nil)
	if err != nil {
		return fmt.Errorf("could not rebuild index %s: %w", r.name, err)
	}

	return nil
}
