// Code generated by github.com/go-surreal/som, DO NOT EDIT.
package define

import (
	lib "github.com/go-surreal/som/tests/basic/gen/som/internal/lib"
	model "github.com/go-surreal/som/tests/basic/model"
)

type nodeGroup struct {
	db        Database
	query     lib.Query[model.Group]
	unmarshal func(buf []byte, val any) error
}

type NodeGroup struct {
	nodeGroup
}

type NodeGroupNoLive struct {
	nodeGroup
}

func NewGroup(db Database, unmarshal func(buf []byte, val any) error) NodeGroup {
	return NodeGroup{nodeGroup{
		db:        db,
		query:     lib.NewQuery[model.Group]("group"),
		unmarshal: unmarshal,
	}}
}

// Filter adds a where statement to the query to
// select records based on the given conditions.
//
// Use where.All to chain multiple conditions
// together that all need to match.
// Use where.Any to chain multiple conditions
// together where at least one needs to match.
func (q nodeGroup) Filter(filters ...lib.Filter[model.Group]) NodeGroup {
	q.query.Where = append(q.query.Where, filters...)
	return NodeGroup{q}
}

// Order sorts the returned records based on the given conditions.
// If multiple conditions are given, they are applied one after the other.
// Note: If OrderRandom is used within the same query,
// it would override the sort conditions.
func (q nodeGroup) Order(by ...*lib.Sort[model.Group]) NodeGroupNoLive {
	for _, s := range by {
		q.query.Sort = append(q.query.Sort, (*lib.SortBuilder)(s))
	}
	return NodeGroupNoLive{q}
}

// OrderRandom sorts the returned records in a random order.
// Note: OrderRandom takes precedence over Order.
func (q nodeGroup) OrderRandom() NodeGroupNoLive {
	q.query.SortRandom = true
	return NodeGroupNoLive{q}
}
