

DEFINE TABLE url_example SCHEMAFULL TYPE NORMAL PERMISSIONS FULL;
DEFINE FIELD id ON TABLE url_example TYPE record<url_example> ASSERT $value != NONE AND $value != NULL AND $value != "";
DEFINE FIELD some_url ON TABLE url_example TYPE option<string | null> ASSERT $value == NONE OR $value == NULL OR string::is::url($value);
DEFINE FIELD some_other_url ON TABLE url_example TYPE string ASSERT $value == "" OR string::is::url($value);

DEFINE TABLE group SCHEMAFULL TYPE NORMAL PERMISSIONS FULL;
DEFINE FIELD id ON TABLE group TYPE record<group> ASSERT $value != NONE AND $value != NULL AND $value != "";
DEFINE FIELD created_at ON TABLE group TYPE option<datetime> VALUE $before OR time::now() PERMISSIONS FOR SELECT WHERE TRUE;
DEFINE FIELD updated_at ON TABLE group TYPE option<datetime> VALUE time::now() PERMISSIONS FOR SELECT WHERE TRUE;
DEFINE FIELD name ON TABLE group TYPE string;

DEFINE TABLE fields_like_db_response SCHEMAFULL TYPE NORMAL PERMISSIONS FULL;
DEFINE FIELD id ON TABLE fields_like_db_response TYPE record<fields_like_db_response> ASSERT $value != NONE AND $value != NULL AND $value != "";
DEFINE FIELD time ON TABLE fields_like_db_response TYPE string;
DEFINE FIELD status ON TABLE fields_like_db_response TYPE string;
DEFINE FIELD detail ON TABLE fields_like_db_response TYPE string;
DEFINE FIELD result ON TABLE fields_like_db_response TYPE option<array | null>;
DEFINE FIELD result.* ON TABLE fields_like_db_response TYPE string;

DEFINE TABLE all_field_types SCHEMAFULL TYPE NORMAL PERMISSIONS FULL;
DEFINE FIELD id ON TABLE all_field_types TYPE record<all_field_types> ASSERT $value != NONE AND $value != NULL AND $value != "";
DEFINE FIELD created_at ON TABLE all_field_types TYPE option<datetime> VALUE $before OR time::now() PERMISSIONS FOR SELECT WHERE TRUE;
DEFINE FIELD updated_at ON TABLE all_field_types TYPE option<datetime> VALUE time::now() PERMISSIONS FOR SELECT WHERE TRUE;
DEFINE FIELD string ON TABLE all_field_types TYPE string;
DEFINE FIELD string_ptr ON TABLE all_field_types TYPE option<string | null>;
DEFINE FIELD other ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD other.* ON TABLE all_field_types TYPE string;
DEFINE FIELD string_ptr_slice ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD string_ptr_slice.* ON TABLE all_field_types TYPE option<string | null>;
DEFINE FIELD string_slice_ptr ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD string_slice_ptr.* ON TABLE all_field_types TYPE string;
DEFINE FIELD int ON TABLE all_field_types TYPE int ASSERT $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD int_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD int_8 ON TABLE all_field_types TYPE int ASSERT $value >= -128 AND $value <= 127;
DEFINE FIELD int_8_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -128 AND $value <= 127;
DEFINE FIELD int_16 ON TABLE all_field_types TYPE int ASSERT $value >= -32768 AND $value <= 32767;
DEFINE FIELD int_16_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -32768 AND $value <= 32767;
DEFINE FIELD int_32 ON TABLE all_field_types TYPE int ASSERT $value >= -2147483648 AND $value <= 2147483647;
DEFINE FIELD int_32_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -2147483648 AND $value <= 2147483647;
DEFINE FIELD int_64 ON TABLE all_field_types TYPE int ASSERT $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD int_64_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD uint_8 ON TABLE all_field_types TYPE int ASSERT $value >= 0 AND $value <= 255;
DEFINE FIELD uint_8_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= 0 AND $value <= 255;
DEFINE FIELD uint_16 ON TABLE all_field_types TYPE int ASSERT $value >= 0 AND $value <= 65535;
DEFINE FIELD uint_16_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= 0 AND $value <= 65535;
DEFINE FIELD uint_32 ON TABLE all_field_types TYPE int ASSERT $value >= 0 AND $value <= 4294967295;
DEFINE FIELD uint_32_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= 0 AND $value <= 4294967295;
DEFINE FIELD float_32 ON TABLE all_field_types TYPE float;
DEFINE FIELD more ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD more.* ON TABLE all_field_types TYPE float;
DEFINE FIELD float_64 ON TABLE all_field_types TYPE float;
DEFINE FIELD rune ON TABLE all_field_types TYPE int ASSERT $value >= -2147483648 AND $value <= 2147483647;
DEFINE FIELD bool ON TABLE all_field_types TYPE bool;
DEFINE FIELD bool_ptr ON TABLE all_field_types TYPE option<bool | null>;
DEFINE FIELD time ON TABLE all_field_types TYPE datetime;
DEFINE FIELD time_ptr ON TABLE all_field_types TYPE option<datetime | null>;
DEFINE FIELD time_nil ON TABLE all_field_types TYPE option<datetime | null>;
DEFINE FIELD uuid ON TABLE all_field_types TYPE uuid;
DEFINE FIELD uuid_ptr ON TABLE all_field_types TYPE option<uuid | null>;
DEFINE FIELD uuid_nil ON TABLE all_field_types TYPE option<uuid | null>;
DEFINE FIELD url ON TABLE all_field_types TYPE string ASSERT $value == "" OR string::is::url($value);
DEFINE FIELD url_ptr ON TABLE all_field_types TYPE option<string | null> ASSERT $value == NONE OR $value == NULL OR string::is::url($value);
DEFINE FIELD url_nil ON TABLE all_field_types TYPE option<string | null> ASSERT $value == NONE OR $value == NULL OR string::is::url($value);
DEFINE FIELD role ON TABLE all_field_types TYPE string ASSERT $value INSIDE ["", "admin", "user"];
DEFINE FIELD enum_ptr ON TABLE all_field_types TYPE option<string | null> ASSERT $value == NULL OR $value INSIDE ["", "admin", "user"];
DEFINE FIELD roles ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD roles.* ON TABLE all_field_types TYPE string ASSERT $value INSIDE ["", "admin", "user"];
DEFINE FIELD enum_ptr_slice ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD enum_ptr_slice.* ON TABLE all_field_types TYPE option<string | null> ASSERT $value == NULL OR $value INSIDE ["", "admin", "user"];
DEFINE FIELD enum_ptr_slice_ptr ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD enum_ptr_slice_ptr.* ON TABLE all_field_types TYPE option<string | null> ASSERT $value == NULL OR $value INSIDE ["", "admin", "user"];
DEFINE FIELD login ON TABLE all_field_types TYPE object;
DEFINE FIELD login.username ON TABLE all_field_types TYPE string;
DEFINE FIELD login.password ON TABLE all_field_types TYPE string;
DEFINE FIELD struct_ptr ON TABLE all_field_types TYPE option<object | null>;
DEFINE FIELD struct_ptr.string_ptr ON TABLE all_field_types TYPE option<string | null>;
DEFINE FIELD struct_ptr.int_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD struct_ptr.time_ptr ON TABLE all_field_types TYPE option<datetime | null>;
DEFINE FIELD struct_ptr.uuid_ptr ON TABLE all_field_types TYPE option<uuid | null>;
DEFINE FIELD struct_slice ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD struct_slice.* ON TABLE all_field_types TYPE object;
DEFINE FIELD struct_slice.*.string_ptr ON TABLE all_field_types TYPE option<string | null>;
DEFINE FIELD struct_slice.*.int_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD struct_slice.*.time_ptr ON TABLE all_field_types TYPE option<datetime | null>;
DEFINE FIELD struct_slice.*.uuid_ptr ON TABLE all_field_types TYPE option<uuid | null>;
DEFINE FIELD struct_ptr_slice ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD struct_ptr_slice.* ON TABLE all_field_types TYPE option<object | null>;
DEFINE FIELD struct_ptr_slice.*.string_ptr ON TABLE all_field_types TYPE option<string | null>;
DEFINE FIELD struct_ptr_slice.*.int_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD struct_ptr_slice.*.time_ptr ON TABLE all_field_types TYPE option<datetime | null>;
DEFINE FIELD struct_ptr_slice.*.uuid_ptr ON TABLE all_field_types TYPE option<uuid | null>;
DEFINE FIELD struct_ptr_slice_ptr ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD struct_ptr_slice_ptr.* ON TABLE all_field_types TYPE option<object | null>;
DEFINE FIELD struct_ptr_slice_ptr.*.string_ptr ON TABLE all_field_types TYPE option<string | null>;
DEFINE FIELD struct_ptr_slice_ptr.*.int_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= -9223372036854775808 AND $value <= 9223372036854775807;
DEFINE FIELD struct_ptr_slice_ptr.*.time_ptr ON TABLE all_field_types TYPE option<datetime | null>;
DEFINE FIELD struct_ptr_slice_ptr.*.uuid_ptr ON TABLE all_field_types TYPE option<uuid | null>;
DEFINE FIELD main_group ON TABLE all_field_types TYPE option<record<group> | null>;
DEFINE FIELD main_group_ptr ON TABLE all_field_types TYPE option<record<group> | null>;
DEFINE FIELD groups ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD groups.* ON TABLE all_field_types TYPE option<record<group> | null>;
DEFINE FIELD node_ptr_slice ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD node_ptr_slice.* ON TABLE all_field_types TYPE option<record<group> | null>;
DEFINE FIELD node_ptr_slice_ptr ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD node_ptr_slice_ptr.* ON TABLE all_field_types TYPE option<record<group> | null>;
DEFINE FIELD slice_slice ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD slice_slice.* ON TABLE all_field_types TYPE option<array | null>;
DEFINE FIELD byte ON TABLE all_field_types TYPE int ASSERT $value >= 0 AND $value <= 255;
DEFINE FIELD byte_ptr ON TABLE all_field_types TYPE option<int | null> ASSERT $value == NONE OR $value == NULL OR $value >= 0 AND $value <= 255;
DEFINE FIELD byte_slice ON TABLE all_field_types TYPE option<bytes | null>;
DEFINE FIELD byte_slice_ptr ON TABLE all_field_types TYPE option<bytes | null>;

DEFINE TABLE group_member SCHEMAFULL TYPE RELATION IN user OUT group PERMISSIONS FULL;
DEFINE FIELD created_at ON TABLE group_member TYPE option<datetime> VALUE $before OR time::now() PERMISSIONS FOR SELECT WHERE TRUE;
DEFINE FIELD updated_at ON TABLE group_member TYPE option<datetime> VALUE time::now() PERMISSIONS FOR SELECT WHERE TRUE;
DEFINE FIELD meta ON TABLE group_member TYPE object;
DEFINE FIELD meta.is_admin ON TABLE group_member TYPE bool;
DEFINE FIELD meta.is_active ON TABLE group_member TYPE bool;
